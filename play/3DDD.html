<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Three.js - Rotating Rectangle with Texture</title>
    <style>
      body {
        margin: 0;
      }
      #container {
        width: 50%;
        height: 90vh;
        overflow: hidden;
        position: relative;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
      const container = document.getElementById("container");

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        75,
        container.offsetWidth / container.offsetHeight,
        0.1,
        1000
      );

      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(container.offsetWidth, container.offsetHeight);
      container.appendChild(renderer.domElement);

      const loader = new THREE.TextureLoader();
      loader.load("../images/vertical.jpg", (texture) => {
        const geometry = new THREE.BoxGeometry(1, 1, 3);

        const materials = [
          new THREE.MeshStandardMaterial({ color: 0x0000ff }),
          new THREE.MeshStandardMaterial({ color: 0x0000ff }),
          new THREE.MeshStandardMaterial({ map: texture }),
          new THREE.MeshStandardMaterial({ color: 0x0000ff }),
          new THREE.MeshStandardMaterial({ color: 0x0000ff }),
          new THREE.MeshStandardMaterial({ color: 0x0000ff }),
        ];

        const cube = new THREE.Mesh(geometry, materials);
        scene.add(cube);

        camera.position.z = 3;

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 1, 100);
        pointLight.position.set(10, 10, 10);
        scene.add(pointLight);

        const animate = () => {
          requestAnimationFrame(animate);
          renderer.render(scene, camera);
        };

        animate();

        let mousedown = false;
        container.addEventListener("mousedown", () => {
            mousedown = true;
        });

        container.addEventListener("mouseup", () => {
          mousedown = false;
        });

        container.addEventListener("mousemove", (event) => {
            if(!mousedown){
                return;
            }
            const { offsetX, offsetY } = event;
            const mouseX = (offsetX / container.offsetWidth) * 2 - 1;
            const mouseY = -(offsetY / container.offsetHeight) * 2 + 1;

            cube.rotation.x = mouseY;
            cube.rotation.y = mouseX;
          });
      });
    </script>
  </body>
</html>
