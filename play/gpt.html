<!DOCTYPE html>
<html>
<head>
	<style>
		.container {
			display: flex;
			justify-content: space-between;
			align-items: center;
			width: 300px;
			height: 200px;
			background-color: #eee;
		}

		.small {
			width: 80px;
			height: 80px;
			background-color: #ccc;
			transition: all 0.5s ease-in-out;
			z-index: 1;
			flex-shrink: 0;
			margin: 10px;
		}

		.small:hover {
			width: 160px;
			height: 160px;
			z-index: 2;
		}

		.tracking {
			position: fixed;
			z-index: 3;
			pointer-events: none;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="small" id="small-1"></div>
		<div class="small" id="small-2"></div>
		<div class="small" id="small-3"></div>
	</div>

	<script>
		const smallDivs = document.querySelectorAll('.small');

		smallDivs.forEach(smallDiv => {
			smallDiv.addEventListener('mouseenter', () => {
				smallDiv.classList.add('tracking');
				document.addEventListener('mousemove', trackMouse);
			});

			smallDiv.addEventListener('mouseleave', () => {
				smallDiv.classList.remove('tracking');
				document.removeEventListener('mousemove', trackMouse);
				smallDiv.style.transform = 'translate(0, 0)';
			});
		});

		function trackMouse(event) {
			const x = event.clientX;
			const y = event.clientY;
			const smallDiv = document.querySelector('.tracking');

			if (smallDiv) {
				const smallDivRect = smallDiv.getBoundingClientRect();
				const smallDivCenterX = smallDivRect.left + smallDivRect.width / 2;
				const smallDivCenterY = smallDivRect.top + smallDivRect.height / 2;

				const deltaX = x - smallDivCenterX;
				const deltaY = y - smallDivCenterY;

				if (Math.abs(deltaX) <= 50 && Math.abs(deltaY) <= 50) {
					smallDiv.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
				} else {
					smallDiv.classList.remove('tracking');
					document.removeEventListener('mousemove', trackMouse);
					smallDiv.style.transform = 'translate(0, 0)';
				}
			}
		}
	</script>
</body>
</html>
